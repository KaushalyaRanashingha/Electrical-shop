<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= pageTitle %></title>
  <link rel="stylesheet" href="/css/dashboard.css">
</head>
<body>

<!-- SIDEBAR -->
<aside class="sidebar" id="sidebar">
  <h2 class="logo">âš¡ NetTec Electronic</h2>

  <ul class="menu">
    <li><a href="/admin/dashboard" class="active">Dashboard</a></li>
    <li><a href="/admin/product">Products</a></li>
    <li><a href="/admin/order">Orders</a></li>
    <li><a href="/admin/customer">Customers</a></li>
    <li><a href="/admin/report">Reports</a></li>
    <li><a href="/admin/setting">Settings</a></li>
  </ul>
</aside>

<!-- MAIN -->
<div class="main">

  <!-- TOPBAR -->
  <header class="topbar">

    <div class="left-section">
      <button class="menu-toggle" onclick="toggleSidebar()">â˜°</button>
      <h1>Dashboard</h1>
    </div>

    <div class="right-section">
      <div class="notification">
        ðŸ””
        <span id="notifyCount"><%= stats ? stats.length : 0 %></span>
      </div>

      <div class="profile">
        ðŸ‘¤ 
      
  </header>

  <!-- STATS -->
  <div class="stats-grid">
    <% (stats || []).forEach(stat => { %>
      <div class="stat-card">
        <p class="stat-label"><%= stat.label %></p>
        <h2><%= stat.value %></h2>
        <span class="stat-desc"><%= stat.description || '' %></span>
      </div>
    <% }) %>
  </div>

  <!-- INVENTORY -->
  <div class="card">
    <h2>Inventory Status</h2>

    <table>
      <thead>
        <tr>
          <th>Product</th>
          <th>SKU</th>
          <th>Category</th>
          <th>Stock</th>
          <th>Price</th>
        </tr>
      </thead>

      <tbody>
        <% (inventoryData || []).forEach(item => { %>
          <tr class="<%= item.stock <= item.minStock ? 'low-stock' : '' %>">
            <td><%= item.name %></td>
            <td><%= item.sku %></td>
            <td><%= item.category %></td>
            <td><%= item.stock %> / <%= item.minStock %></td>
            <td>Rs. <%= item.price %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>

</div>

<!-- SOCKET -->
<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io();

  socket.on("productUpdated", () => {
    location.reload();
  });

  function toggleDarkMode(){
    document.body.classList.toggle("dark");
  }

  function toggleSidebar(){
    document.getElementById("sidebar").classList.toggle("active");
  }
</script>

</body>
</html>
